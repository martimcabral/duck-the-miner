[gd_scene load_steps=28 format=3 uid="uid://ur4yarmj6ihc"]

[ext_resource type="PackedScene" uid="uid://c6nqv0wtxmg0g" path="res://scenes/player.tscn" id="1_5mm4o"]
[ext_resource type="Script" path="res://scripts/world_generation.gd" id="1_nmwod"]
[ext_resource type="Texture2D" uid="uid://ddhoinlyvlc4s" path="res://assets/textures/ore_tilemap.png" id="3_ty73d"]
[ext_resource type="Texture2D" uid="uid://cs5hgtiamef40" path="res://assets/textures/destroy_stages/stages.png" id="4_qexfe"]
[ext_resource type="Script" path="res://scripts/map_management.gd" id="4_ys0ii"]
[ext_resource type="Texture2D" uid="uid://b8523lkw1l4p7" path="res://assets/textures/selected_block.png" id="5_16s1h"]
[ext_resource type="AudioStream" uid="uid://t2ki8ixqk78s" path="res://sounds/musics/enter.ogg" id="8_imyl6"]
[ext_resource type="AudioStream" uid="uid://bjjm88pfvbfb4" path="res://sounds/musics/wave.ogg" id="9_ctjxb"]
[ext_resource type="AudioStream" uid="uid://d3o7v1blw5tgy" path="res://sounds/musics/void.ogg" id="10_7k7pq"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_fbxys"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_fk0kb"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_bn4x4"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ecko5"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_pc0en"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_xrod2"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_n7i4d"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_14cix"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_1ej75"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_cuhsb"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_j8f3j"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_iefnk"]
texture = ExtResource("3_ty73d")
0:0/0 = 0
0:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_fbxys")
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:0/0/custom_data_0 = 1000
1:0/0 = 0
1:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_bn4x4")
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0/custom_data_0 = 3000
2:0/0 = 0
2:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_xrod2")
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0/custom_data_0 = 5000
3:0/0 = 0
3:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_1ej75")
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0/custom_data_0 = 12500
0:1/0 = 0
0:1/0/custom_data_0 = -1
1:1/0 = 0
1:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_ecko5")
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0/custom_data_0 = 10000
2:1/0 = 0
2:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_n7i4d")
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:1/0/custom_data_0 = 10000
0:2/0 = 0
0:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_fk0kb")
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0/custom_data_0 = 7500
1:2/0 = 0
1:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_pc0en")
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0/custom_data_0 = 3000
2:2/0 = 0
2:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_14cix")
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0/custom_data_0 = -1
3:1/0 = 0
3:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_cuhsb")
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0/custom_data_0 = 10000
3:2/0 = 0
3:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_j8f3j")
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:2/0/custom_data_0 = 500

[sub_resource type="TileSet" id="TileSet_60hiy"]
occlusion_layer_0/light_mask = 1
physics_layer_0/collision_layer = 1
custom_data_layer_0/name = "health"
custom_data_layer_0/type = 2
sources/0 = SubResource("TileSetAtlasSource_iefnk")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_qwac2"]
texture = ExtResource("4_qexfe")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0

[sub_resource type="TileSet" id="TileSet_inx3v"]
sources/0 = SubResource("TileSetAtlasSource_qwac2")

[sub_resource type="Gradient" id="Gradient_wtjrx"]
offsets = PackedFloat32Array(0, 0.7, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.626506, 0.626506, 0.626506, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_4634m"]
gradient = SubResource("Gradient_wtjrx")

[sub_resource type="Environment" id="Environment_jiaeb"]
background_mode = 3
tonemap_mode = 3
tonemap_exposure = 0.86
tonemap_white = 5.58
adjustment_enabled = true
adjustment_color_correction = SubResource("GradientTexture2D_4634m")

[node name="World" type="Node2D"]
script = ExtResource("1_nmwod")

[node name="Player" parent="." instance=ExtResource("1_5mm4o")]

[node name="WorldTileMap" type="TileMap" parent="."]
unique_name_in_owner = true
texture_filter = 1
tile_set = SubResource("TileSet_60hiy")
format = 2
script = ExtResource("4_ys0ii")

[node name="BlockSelection" type="Sprite2D" parent="WorldTileMap"]
physics_interpolation_mode = 2
z_index = 3
position = Vector2(16, 16)
texture = ExtResource("5_16s1h")
offset = Vector2(-8, -8)

[node name="CaveSystem" type="TileMapLayer" parent="WorldTileMap"]
texture_filter = 1
use_parent_material = true
tile_set = SubResource("TileSet_60hiy")
collision_visibility_mode = 2

[node name="BreakingStages" type="TileMapLayer" parent="WorldTileMap"]
tile_set = SubResource("TileSet_inx3v")

[node name="TimeToPutOres" type="Timer" parent="WorldTileMap"]
wait_time = 0.5
one_shot = true
autostart = true

[node name="GlobalShadow" type="CanvasModulate" parent="."]
color = Color(0.158472, 0.158472, 0.158472, 1)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_jiaeb")

[node name="WorldMusic" type="Node2D" parent="."]

[node name="Enter" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("8_imyl6")
volume_db = -15.0

[node name="Wave" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("9_ctjxb")
volume_db = -15.0

[node name="Void" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("10_7k7pq")
volume_db = -15.0

[node name="MusicTimer" type="Timer" parent="WorldMusic"]
process_callback = 0
wait_time = 180.0
autostart = true

[connection signal="timeout" from="WorldTileMap/TimeToPutOres" to="." method="_on_time_to_put_ores_timeout"]
[connection signal="timeout" from="WorldMusic/MusicTimer" to="." method="_on_music_timer_timeout"]
