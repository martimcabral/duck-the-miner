[gd_scene load_steps=23 format=3 uid="uid://ur4yarmj6ihc"]

[ext_resource type="PackedScene" uid="uid://c6nqv0wtxmg0g" path="res://scenes/player.tscn" id="1_5mm4o"]
[ext_resource type="Script" path="res://scripts/world_generation.gd" id="1_nmwod"]
[ext_resource type="Texture2D" uid="uid://ddhoinlyvlc4s" path="res://assets/textures/ore_tilemap.png" id="3_ty73d"]
[ext_resource type="Script" path="res://scripts/mine.gd" id="4_syxjy"]
[ext_resource type="AudioStream" uid="uid://t2ki8ixqk78s" path="res://sounds/musics/enter.ogg" id="8_imyl6"]
[ext_resource type="AudioStream" uid="uid://bjjm88pfvbfb4" path="res://sounds/musics/wave.ogg" id="9_ctjxb"]
[ext_resource type="AudioStream" uid="uid://d3o7v1blw5tgy" path="res://sounds/musics/void.ogg" id="10_7k7pq"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_fbxys"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_fk0kb"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_bn4x4"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ecko5"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_pc0en"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_xrod2"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_n7i4d"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_14cix"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_1ej75"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_cuhsb"]
polygon = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_iefnk"]
texture = ExtResource("3_ty73d")
0:0/0 = 0
0:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_fbxys")
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_bn4x4")
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0 = 0
2:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_xrod2")
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0 = 0
3:0/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_1ej75")
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0 = 0
1:1/0 = 0
1:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_ecko5")
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:1/0 = 0
2:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_n7i4d")
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0 = 0
0:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_fk0kb")
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_pc0en")
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_14cix")
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0 = 0
3:1/0/occlusion_layer_0/polygon = SubResource("OccluderPolygon2D_cuhsb")
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSet" id="TileSet_60hiy"]
occlusion_layer_0/light_mask = 1
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_iefnk")

[sub_resource type="Gradient" id="Gradient_wtjrx"]
offsets = PackedFloat32Array(0, 0.7, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.626506, 0.626506, 0.626506, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_4634m"]
gradient = SubResource("Gradient_wtjrx")

[sub_resource type="Environment" id="Environment_jiaeb"]
background_mode = 3
tonemap_mode = 3
tonemap_exposure = 0.86
tonemap_white = 5.58
adjustment_enabled = true
adjustment_color_correction = SubResource("GradientTexture2D_4634m")

[node name="World" type="Node2D"]
script = ExtResource("1_nmwod")

[node name="Player" parent="." instance=ExtResource("1_5mm4o")]
z_index = 20
position = Vector2(0, -179)

[node name="TileMap" type="TileMap" parent="."]
texture_filter = 1
tile_set = SubResource("TileSet_60hiy")
format = 2
script = ExtResource("4_syxjy")

[node name="CaveSystem" type="TileMapLayer" parent="TileMap"]
unique_name_in_owner = true
texture_filter = 1
use_parent_material = true
tile_set = SubResource("TileSet_60hiy")

[node name="TimeToPutOres" type="Timer" parent="TileMap"]
wait_time = 0.1
one_shot = true
autostart = true

[node name="GlobalShadow" type="CanvasModulate" parent="."]
color = Color(0.158472, 0.158472, 0.158472, 1)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_jiaeb")

[node name="WorldMusic" type="Node2D" parent="."]

[node name="Enter" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("8_imyl6")

[node name="Wave" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("9_ctjxb")

[node name="Void" type="AudioStreamPlayer2D" parent="WorldMusic"]
stream = ExtResource("10_7k7pq")

[node name="MusicTimer" type="Timer" parent="WorldMusic"]
process_callback = 0
wait_time = 180.0
autostart = true

[connection signal="timeout" from="TileMap/TimeToPutOres" to="." method="_on_time_to_put_ores_timeout"]
[connection signal="timeout" from="WorldMusic/MusicTimer" to="." method="_on_music_timer_timeout"]
